
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
blog.ipedrazas.me
</title>

    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    

    
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="/static/css/bootstrap.min.css">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">


    
  </head>

  <body>
    <div class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">blog.ipedrazas.me</a>
        </div>
        
        <div class="navbar-collapse collapse">
          
          <ul class="nav navbar-nav">
            
            <li><a href="/archives.html">Archives</a></li>
            
            
          </ul>
          
          
          <ul class="nav navbar-nav navbar-right">
            
            <li class="dropdown">
            <a href="#" data-toggle="dropdown">Categories <b class="caret"></b></a>
            <ul class="dropdown-menu">
              
              
              <li>
              <a href="/category/Android.html">Android <span class="badge pull-right">6</span></a>
              </li>
              
              
              <li>
              <a href="/category/Architecture.html">Architecture <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/Arduino.html">Arduino <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/Bitcoin.html">Bitcoin <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/CMS.html">CMS <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/Cassandra.html">Cassandra <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/category/DevOps.html">DevOps <span class="badge pull-right">9</span></a>
              </li>
              
              
              <li>
              <a href="/category/Development.html">Development <span class="badge pull-right">8</span></a>
              </li>
              
              
              <li>
              <a href="/category/Docker.html">Docker <span class="badge pull-right">5</span></a>
              </li>
              
              
              <li>
              <a href="/category/Idea.html">Idea <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/category/London.html">London <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/Maker.html">Maker <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/Me.html">Me <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/Python.html">Python <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/Spanish.html">Spanish <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/category/Uncategorized.html">Uncategorized <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/analytics.html">analytics <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/books.html">books <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/children.html">children <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/category/startups.html">startups <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/category/stats.html">stats <span class="badge pull-right">1</span></a>
              </li>
              
            </ul>
            </li>
            
            
            <li class="dropdown">
            <a href="#" data-toggle="dropdown">Tags <b class="caret"></b></a>
            <ul class="dropdown-menu">
              
              
              <li>
              <a href="/tag/Android.html">Android <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Idea.html">Idea <span class="badge pull-right">5</span></a>
              </li>
              
              
              <li>
              <a href="/tag/stats.html">stats <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/kubernetes.html">kubernetes <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/immutable.html">immutable <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/architecture.html">architecture <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Arduino.html">Arduino <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Cassandra.html">Cassandra <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Docker.html">Docker <span class="badge pull-right">7</span></a>
              </li>
              
              
              <li>
              <a href="/tag/cassandra.html">cassandra <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/docker.html">docker <span class="badge pull-right">8</span></a>
              </li>
              
              
              <li>
              <a href="/tag/tutorial.html">tutorial <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/DevOps.html">DevOps <span class="badge pull-right">11</span></a>
              </li>
              
              
              <li>
              <a href="/tag/ansible.html">ansible <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/vagrant.html">vagrant <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/jenkins.html">jenkins <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/neo4j.html">neo4j <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/devops.html">devops <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/mesos.html">mesos <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Mesos.html">Mesos <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/apachekafka.html">apachekafka <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/aws.html">aws <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/kinesis.html">kinesis <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/London.html">London <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/coreos.html">coreos <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/lxd.html">lxd <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/meetup.html">meetup <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/ubuntu.html">ubuntu <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/microservices.html">microservices <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Development.html">Development <span class="badge pull-right">6</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Javascript.html">Javascript <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Python.html">Python <span class="badge pull-right">3</span></a>
              </li>
              
              
              <li>
              <a href="/tag/deploy.html">deploy <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/python.html">python <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/clinker.html">clinker <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Java.html">Java <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/elasticsearch.html">elasticsearch <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/github.html">github <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/testing.html">testing <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/taiga.html">taiga <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Spanish.html">Spanish <span class="badge pull-right">4</span></a>
              </li>
              
              
              <li>
              <a href="/tag/pycones.html">pycones <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Me.html">Me <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/startups.html">startups <span class="badge pull-right">4</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Maker.html">Maker <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/RaspberryPi.html">RaspberryPi <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/dev.html">dev <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/gunicorn.html">gunicorn <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/java.html">java <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/tomcat.html">tomcat <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/sexism.html">sexism <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/Uncategorized.html">Uncategorized <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/dotmarks.html">dotmarks <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/children.html">children <span class="badge pull-right">2</span></a>
              </li>
              
              
              <li>
              <a href="/tag/security.html">security <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/raspberrypi.html">raspberrypi <span class="badge pull-right">1</span></a>
              </li>
              
              
              <li>
              <a href="/tag/anti-patterns.html">anti-patterns <span class="badge pull-right">1</span></a>
              </li>
              
            </ul>
            </li>
            
          </ul>
          
        </div>
        
      </div>
    </div>

    <div class="container col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
      



<article>
<h1><a href="/snapshot-architecture.html">Snapshot Architecture</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-11-02 00:40</span>



<a class="label label-success" href="/category/Architecture.html">Architecture</a>




<a class="label label-info" href="/tag/kubernetes.html">kubernetes</a>

<a class="label label-info" href="/tag/immutable.html">immutable</a>

<a class="label label-info" href="/tag/architecture.html">architecture</a>


</p>

<p>Immutable is good. Immutable is good because it doesn&rsquo;t change, and things that don&rsquo;t change are good because if it works once, it has to work always&hellip; or that&rsquo;s the theory.</p>

<p>If you use any of those fancy new functional programming languages, you&rsquo;re using immutable data types. They are great. Do you know why? because they do not change. Things that change are hard. Managing things that change is complicated. Managing many things that chnage very quickly is a nightmare.</p>

<p>Have you heard of immutable infrastructure? infrastructure is hard, so, by making infrastructure immutable you reduce the pain of managing things that change. It has been recently that we achieved the fact of deploying <strong>always</strong> the same application regardless of where it runs.</p>

<p>Kubernetes helps a bit with managing immutable infrastructure, but infrastructure is not our mission. It is important, but it is just another piece. I do not know anyone with the only purpouse of running machines by the sole sake of running them. It&rsquo;s the applications we&rsquo;re interested on!</p>

<p>Do we have immutable applications? kind of. Containers are helping. Do we have immutable infrastructure? indeed we have, and yes, containers are helping&hellip; So, where is the trouble?</p>

<p>It has taken me a while to understand this, but I think I&rsquo;m starting to understand where the rabbit hole is (and where it takes).</p>

<p>If infrastructure is our data type, the architecture is the functional programming language. It&rsquo;s great to have immutability all the way down making sure our data, applications or machines do not change, but there&rsquo;s a missing piece still. If we don&rsquo;t start re-architecting solutions based on those principles, the principles will not stand.</p>

<p>Like those people making fun of microservices: you go from a big horrible monolithic application to a bunch of horrible services scatered all over the place. Comment might be fair in some contexts, but in my experience it&rsquo;s not about services or monoliths, it&rsquo;s about adopting a half baked approach.</p>

<p>Microservices are great, but they are hard to manage because the internal dependencies now are external. We give away control. We trust&hellip; the others.</p>

<p>Trouble is that if we understand an application as a set of loosely coupled microservices (all of them running in containers, hence immutable services), we have to accept that now that state, that mutability we have tried to get rid of, is present as the hardest of all forms: distributed evolution.</p>

<p>We have traded the cohesion of our applications for flexibility. And it is good. But we have still to embrace a truly immutable architecture. We have to understand that our applications are immutable. The services do not change. The services are replaced by other services that superseed the old ones.</p>

<p>It&rsquo;s not deploying new versions of an application anymore, it&rsquo;s deploying new services every time. Services that replace services.</p>

<p>Let me tell you 2 words: Backwards compatible. Probably the heaviest stone in our world of design and compute. Think about it. What I&rsquo;m saying is that we&rsquo;re in a position to let all the baggage go. Every time you start, you start afresh. It doesn&rsquo;t matter your previous sins, you&rsquo;re clean.</p>

<p>Stop thinking of your code like something that it&rsquo;s alive. Think of your code as a cake or toy factory. It produces things that do not change. You can change the machinery of that factory, you can improve the making of products, but the toy you did two years ago&hellip; that toy will not be touched once has left the factory.</p>

<p>I know, you could go all crazy and start shouting <strong>&ldquo;Stop refactoring!!&rdquo;, &ldquo;Stop fixing bugs!&rdquo;</strong>but truth is that you&rsquo;re not doing it to improve something that it&rsquo;s there, you&rsquo;re doing it to make something better.</p>

<p class="text-right"><a class="btn btn-default" href="/snapshot-architecture.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/08/25/spaghetti-management/.html">Spaghetti management</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-08-25</span>



<a class="label label-success" href="/category/DevOps.html">DevOps</a>




<a class="label label-info" href="/tag/DevOps.html">DevOps</a>

<a class="label label-info" href="/tag/Docker.html">Docker</a>

<a class="label label-info" href="/tag/kubernetes.html">kubernetes</a>

<a class="label label-info" href="/tag/microservices.html">microservices</a>


</p>

<p>Microservices are great because:</p>

<ul>
<li>They are small, that&#8217;s why the appended &#8220;<em>Micro</em>&#8220;</li>
<li>They are independent one each other (deployment, runtime, configuration, downtime, scaling&#8230;)</li>
</ul>

<p>Great! so, where&#8217;s the catch&#8230; because there&#8217;s always a catch. Think about it. You can split your API in multiple microservices. Great, now, the application is loosely coupled to a bunch of services.</p>

<p>If you replace services by libraries, the name that comes to your mind is? DEPENDENCIES!</p>

<p>The catch with microservices is that dependencies are not implicit in your API or APP the way they used to be (think jars, gems or python libs).</p>

<p>Bear in mind as well that IDE&#8217;s and compilers are very good (in general) at finding when dependencies are broken&#8230; which is not the case if you have a bunch of loosely couple services.</p>

<p>Who&#8217;s responsible for managing all those dependencies now? because excuse me, but I need a way to bundle services together. Or, to be more precise, to bundle versions of services together.</p>

<p>To me the hardest problem is not a design problem, the hardest problem is managing dependencies at version level.</p>

<p>At <a href="https://import.io/" title="Import.io">Import.io</a> we started moving towards this architecture and the way we solved it was not using service discovery but using the old idea of having a contract where you specify a bunch of versions that you know they play nicely together.</p>

<p>I always differentiate Runtime, Configuration and Context. In our case, Runtime was a container running a microservice. Configuration was another container (a data container) where the relationship between versions was explicitly defined, like a manifest.</p>

<p>The advantage of using a data container to bind a bunch of versions is that you have traceability. You know always how the application was configured, because it is true, with microservices we have gained a lot of flexibility but we have lost certain control. Using a container helps me to regain that control.</p>

<p>Why do I do this? because I can leverage my continuous integration pipeline to test my services and how they interact with each other according to specific versions. Because now, my microservice bundles are in git and not in some obscure key of zookeeper or consul. Even more, when the time to migrate to <a href="http://kubernetes.io/">Kubernetes</a> arrives, I can use my data container as my pod blueprint.</p>

<p>Because one thing is my architecture and another different thing is my runtime and my operations.</p>

<p>Remember&#8230;</p>

<blockquote>
<p><strong>It&#8217;s not about power, it&#8217;s about responsibility</strong></p>
</blockquote>

<p class="text-right"><a class="btn btn-default" href="/2015/08/25/spaghetti-management/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/08/12/contain-3/.html">Contain 3</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-08-12</span>



<a class="label label-success" href="/category/DevOps.html">DevOps</a>




<a class="label label-info" href="/tag/DevOps.html">DevOps</a>

<a class="label label-info" href="/tag/London.html">London</a>

<a class="label label-info" href="/tag/coreos.html">coreos</a>

<a class="label label-info" href="/tag/docker.html">docker</a>

<a class="label label-info" href="/tag/kubernetes.html">kubernetes</a>

<a class="label label-info" href="/tag/lxd.html">lxd</a>

<a class="label label-info" href="/tag/meetup.html">meetup</a>

<a class="label label-info" href="/tag/ubuntu.html">ubuntu</a>


</p>

<p>As it usually happens in life, things changed pretty quickly. Boris, the guy from Microsoft, had a car accident (rumours of him being in a Google self driving ca were discarded promptly). With Boris out, Matt asked me if I could be in the panel instead of him. I guess that Matt thought I was the perfect candidate to represent Microsoft since I am one of the few certified Windows Me power users (cough, cough).</p>

<p>Matt understands containers, that&#8217;s why he gave us the slides the proper way:</p>

<blockquote>
<p><strong><em>docker run jetstack/contain:v3_container_os</em></strong></p>
</blockquote>

<p>The good news, to compensate the bad news of Boris car accident, was that Chris Kenyon, from Canonical came to talk to us about their plans with containers: <a href="http://www.ubuntu.com/cloud/tools/lxd" target="_blank">LXD</a></p>

<p>Chris told us during the panel that the datacenter now is following how mobile phones work. Updating hundreds or thousands of machines it&#8217;s equivalent to update thousands of telephones. Which is very interesting way of explaining transactional updates. Ubuntu, with snappy or CoreOS have that as the core of their value proposition.</p>

<p>It was an interesting conversation. I&#8217;m a big fan of immutable and ephemeral infrastructure. So when people ask me &#8220;<em>how do you update your containers</em>&#8221; the answer is simple: You don&#8217;t!</p>

<p>I think it&#8217;s good to differentiate when transactional updates are good and when they are not. Host updates: <strong>yes</strong>. Containers updates: <strong>No</strong>!</p>

<p>But what it&#8217;s fundamental is to understand that containers are not machines or VMs. You have to see your containers as snapshots. Immutable snapshots that can be easily discarded.</p>

<p>Forget about Chef, Puppet, Ansible or Salt</p>

<p><a href="http://ivan.pedrazas.me/wp-content/uploads/2015/08/pffbz.jpg"><img class="aligncenter size-medium wp-image-466" src="http://ivan.pedrazas.me/wp-content/uploads/2015/08/pffbz-300x177.jpg" alt="pffbz" width="300" height="177" /></a></p>

<p>Updating containers have 2 parts: updating the image and running that container. Kubernetes is your friend here. It wasn&#8217;t until yesterday that I realised that many of my colleagues do not understand the great value of Kubernetes.</p>

<p>Updating containers is a matter of defining a new pod with your new containers and swapping the label when you are ready for the &#8220;update&#8221;. I guess that the best way of putting it is to say that Kubernetes does not try to solve the update problem because there&#8217;s no such problem in the kubernetes world. We have others&#8230; but that it&#8217;s not one of them.</p>

<p>In summary, an excellent night. Thanks <a href="http://www.jetstack.io/" target="_blank">Jetstack</a> and all the Matts involved!</p>

<p class="text-right"><a class="btn btn-default" href="/2015/08/12/contain-3/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/06/25/deconstructing/.html">Deconstructing</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-06-25</span>



<a class="label label-success" href="/category/DevOps.html">DevOps</a>




<a class="label label-info" href="/tag/DevOps.html">DevOps</a>

<a class="label label-info" href="/tag/apachekafka.html">apachekafka</a>

<a class="label label-info" href="/tag/aws.html">aws</a>

<a class="label label-info" href="/tag/docker.html">docker</a>

<a class="label label-info" href="/tag/kinesis.html">kinesis</a>

<a class="label label-info" href="/tag/mesos.html">mesos</a>


</p>

<p>I was chatting with a friend last night and he told me &#8220;I get containers now. I needed some give it some thought, but I get them now&#8221;. If I had to describe him with one word I would use &#8220;smart&#8221; without any doubt&#8230; still he had to think about why containers are so great.</p>

<p>We carried on talking and after two more beers and few pork ribs I managed to make him understand why we are about to change we build applications. It&#8217;s not only because of containers (or systems like Mesos or Kubernetes), but because with containers, we have seen the light of deconstructing the monoliths into microservices.</p>

<p>But, there&#8217;s another key element on this Game of Thrones: The Log, systems like Apache kafka are going to help to change completely the landscape of what we build, and ship and run. Like with Microservices, the Log overlord brings a blessing in disguise: it&#8217;s not what it does, it&#8217;s what allows others to do.</p>

<p>It is not about its responsibility, it&#8217;s about delegating that responsibility in who really has it. Let&#8217;s look at what happens today. We have a system, that system gets some data, compute that data and stores that data in a database. Easy!</p>

<p>Then someone comes along and asks to get that same data and put it somewhere else, so our system now gets some data, compute that data and stores that data in two different places.</p>

<p>As we can see, this does not scale very well, so people get smart, and start doing things like database triggers and a whole bunch of things that are totally correct in itself, but over time, it creates a big mess of &#8220;dirty integrations&#8221;. These are the things that will break when we want to move our system. These are the future nightmares of our microservices journey.</p>

<p>Then, we have The LOG&#8230; a dumb system that guess what: it does not care about what do you do with that data. The Log Overlord will keep your data for a while, and it&#8217;s up to you, the consumers, to use it.</p>

<p>A bit like how the TV has been broadcasting for a few years&#8230; with a twist, because, as we do now, this TV system allows you to consume the programs when you want it.</p>

<p>Ok, so, basically, we have a place where we put all that data (for a while) and we have a bunch of people consuming that data? So what?</p>

<p>Well, not much, but as with microservices, what the LOG overlord provides is the ability of your consumers to consume the way they want (once per hour, once per day&#8230; in real time), and even more, the people who create the TV shows do not care about the broadcasting anymore.</p>

<p>Think about it. Microservices decouple your business logic. With microservices you can write very business specific services without having to worry about all the other business rules, use cases and (oh yes) those terrible exceptions.</p>

<p>Apache Kafka or Amazon Kinesis decouple your data. How you read that data is up to the readers and the writers have nothing to do with that. It&#8217;s like a writer writing a book, and people reading that book: when they want, how they want&#8230; as opposed to the writer writing and reading aloud to certain audience.</p>

<p>I&#8217;m not sure if the creators of Kafka chose that name because it&#8217;s a system that allows writers and readers to focus and enjoy what they want to do.</p>

<p>As I said, we are living very exciting times with a lot of change. Let me finish with a song&#8230; or my own version of a song by <a href="https://www.youtube.com/watch?v=f8PMqLHF1jU">Elvis Presley</a>:</p>

<p style="text-align: center;">
  Treat me like a fool,<br /> Treat me mean and cruel,<br /> But <strong>LOG</strong> me.
</p>

<p style="text-align: center;">
  Wring my faithful heart,<br /> Tear it all apart,<br /> But <strong>LOG</strong> me.
</p>

<p style="text-align: center;">
  <a href="http://ivan.pedrazas.me/wp-content/uploads/2015/06/649ca9a3f3d4aba78095a28c26fba1fa.jpg"><img class="aligncenter size-medium wp-image-455" src="http://ivan.pedrazas.me/wp-content/uploads/2015/06/649ca9a3f3d4aba78095a28c26fba1fa-233x300.jpg" alt="649ca9a3f3d4aba78095a28c26fba1fa" width="233" height="300" /></a>
</p>

<p class="text-right"><a class="btn btn-default" href="/2015/06/25/deconstructing/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/06/16/distance-to-mesos/.html">Distance to Mesos</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-06-16</span>



<a class="label label-success" href="/category/DevOps.html">DevOps</a>




<a class="label label-info" href="/tag/DevOps.html">DevOps</a>

<a class="label label-info" href="/tag/Mesos.html">Mesos</a>

<a class="label label-info" href="/tag/devops.html">devops</a>

<a class="label label-info" href="/tag/docker.html">docker</a>

<a class="label label-info" href="/tag/mesos.html">mesos</a>


</p>

<p>I&#8217;ve notice that lately people don&#8217;t talk about Docker so much. Nothing to complain about, really, but what happens is that people has shifted to talk about <span id=":1u0.1" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Kubernetes</span> and <a href="http://mesos.apache.org/"><span id=":1u0.2" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span></a>&#8230; Sigh.</p>

<p>One of the questions I&#8217;ve asked more frequently is &#8220;How to move to <span id=":1u0.3" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>&#8230; and is it worth it?&#8221;</p>

<p>There&#8217;s no straight answer to that question really. I don&#8217;t like to say &#8220;it depends&#8221; because it seems that you&#8217;re trying to run away, but in this case it really does.</p>

<p>It&#8217;s a bit like asking &#8220;how to go to the London Eye&#8221;, first thing I need to find out is to know where you&#8217;re travelling from because it is not the same to come from Liverpool than from Liverpool street&#8230; Distance is important because I can assume that if you come from Liverpool you will arrive to London <span id=":1u0.4" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Euston</span> (but I might be wrong, and you might be travelling by car instead of train&#8230;).</p>

<p>Anyway, it doesn&#8217;t matter where you come from, I&#8217;m sure you will manage to find the way to the London Eye, and if not&#8230;  just ask. There&#8217;s plenty of people happy to help.</p>

<p>With <span id=":1u0.5" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> you have a similar problem, you see? it&#8217;s not the same to come from a <span id=":1u0.6" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">multi</span>-monolithic architecture with more silos than the <acronym title="Ministry of Defense">MOD</acronym>, than to have a very lean service based architecture with containers and service discovery already in place.</p>

<p>So, are containers important? strictly speaking: No, however, by using containers you can leverage some very cool functionality that systems like <span id=":1u0.7" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> have.</p>

<p>Service Discovery, anyone? let&#8217;s put it like this, it does not matter how you build software, using SD should be part of it. Period.</p>

<p>There are 3 big blocks in any application:</p>

<ul>
<li><span id=":1u0.8" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Runtime</span>: this is what we run. From a web application to a queue worker, it doesn&#8217;t really matter. It&#8217;s that thing that (when it works) does its job.</li>
<li>Configuration: this is what the thing that runs need to run (the way we want). It can be credentials, external resources, addresses, whatever that makes our <span id=":1u0.9" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">runtime</span> to be flexible.</li>
<li>Context: this is usually forgotten (until it&#8217;s too late) and it&#8217;s where your <span id=":1u0.10" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">runtime</span> runs and all those bits and pieces that you need to be run it there. Firewall rules, Security groups, etc.</li>
</ul>

<p>These blocks do not depend on what you run: Java, python, <span id=":1u0.11" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">javascript</span>&#8230; or where you run it: Amazon, Azure&#8230; they are 3 blocks that every software development has to define&#8230; what about in <span id=":1u0.12" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>?</p>

<p>Well, <span id=":1u0.13" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>, as a software, will need these 3 blocks: we have the <span id=":1u0.14" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">runtime</span>, <span id=":1u0.15" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">mesos</span>, marathon, <span id=":1u0.16" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">cronos</span>&#8230; the different configuration files these young lads use, and where do we run <span id=":1u0.17" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>: our <span id=":1u0.18" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">datacenter</span>, <span id=":1u0.19" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">AWS</span>, Google&#8230;</p>

<p>The interesting thing is that inside <span id=":1u0.20" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> those 3 blocks are somehow diluted.</p>

<p>To begin with, Context is <span id=":1u0.21" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>&#8230; To the point that once you have <span id=":1u0.22" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> you don&#8217;t have environments anymore. Your application have different <span id=":1u0.23" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">datasources</span> (Dev, Test, Prod) and different priorities, but it&#8217;s unlikely that you will have a <span id=":1u0.24" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> cluster per environment (and if you do, there&#8217;s something very fundamental that you didn&#8217;t get right).</p>

<p>What makes <span id=":1u0.25" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> very attractive is that &#8220;he knows&#8221; so you don&#8217;t have to. But to be able to do that your applications have to be built in a way that it&#8217;s safe for <span id=":1u0.26" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> to move around (here it&#8217;s where containers and service discovery can be very handy).</p>

<p>As I said before, people keep asking me about <span id=":1u0.27" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> and my answers always point towards the same place: maybe <span id=":1u0.28" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span> is not for you, but moving to containers and using service discovery will make your applications to work better and look, once you&#8217;re there, you&#8217;re not that far from <span id=":1u0.29" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>.</p>

<p>In summary, you should not aim to use Service Discovery and containers as a <span id=":1u0.30" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">pre</span>-condition to <span id=":1u0.31" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">Mesos</span>, you should do it because it will make your life (and the life of people dealing with your systems) better.</p>

<p>Not everybody is Google, but everybody should aim to run applications like Google does.</p>

<p class="text-right"><a class="btn btn-default" href="/2015/06/16/distance-to-mesos/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/04/03/everyday-sexism-the-python-way/.html">Everyday Sexism, the Python way</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-04-03</span>



<a class="label label-success" href="/category/Python.html">Python</a>




<a class="label label-info" href="/tag/Python.html">Python</a>

<a class="label label-info" href="/tag/sexism.html">sexism</a>


</p>

<p>&#8220;<strong>05:48:</strong> Entrevistamos Oier Etxaniz, Francisco Fernandez, Alexandre Manhães y Manuel Graña, organizadores de <a href="https://ep2015.europython.eu/">EuroPython 2015</a>.&#8221;</p>

<p>As many Spaniards I was super excited and super proud of Spain hosting this version of EuroPython. I&#8217;ve really enjoyed the first two editions of the Spanish PyCon, so I was over the top when I learnt that this year PyConEs was going to be EuroPython.</p>

<p>I have been a speaker in both PyConEs (2013 and 2014) and as everybody who participated in them we knew there was much room for improvement. Organising something big like a PyCon conference is hard, and I&#8217;ve tried to give my support to the organisation as much as I could.</p>

<p>Bearing that in mind, I have to stand up today and shout &#8220;ENOUGH!&#8221;. During the podcast I mentioned earlier a person of the organisation makes the following comment:</p>

<p style="padding-left: 30px;">
  &#8220;<em>Va a haber las <a href="https://twitter.com/djangogirls">DjangoGirls</a>, los DjangoGays, los django?? por aquello de, digo yo, de las cosas </em><em>diferentes, no?</em>&#8221; [laughs]
</p>

<p style="padding-left: 30px;">
  &#8230;
</p>

<p style="padding-left: 30px;">
  &#8220;<em>A lo mejor hacemos los Django Macho ibéricos para ???? con las mujeres&#8221; [more laughs]</em>
</p>

<p style="padding-left: 30px;">
  [&#8220;There will be DjangoGirls, DjangoGays and Django?? because, you know, it&#8217;s ok <strong>to be different</strong>&#8220;]
</p>

<p style="padding-left: 30px;">
  [Maybe we should do a DjangoMachos to ???? with the girls]
</p>

<p>(the ?? it&#8217;s because I cannot understand what they say).</p>

<p>Now, this comment is made as a result of a question that asks to the EuroPython organisers about &#8220;<em><strong>how to make a better society</strong></em>&#8220;.</p>

<p>There are two very disturbing things here. First and foremost, that a member of the organisation speaking makes such awful statements. Second, and even more scary, are the laughs resulting of those comments and that nobody thought how terribly out of place were those comments.</p>

<p>I am not sure I can describe how I felt when I heard that <span id=":148.41" class="J-JK9eJ-PJVNOc" tabindex="-1" data-g-spell-status="2">podcast</span>. Anger, embarrassment, more anger and above all an extremely deep disappointment.</p>

<p>I&#8217;m disappointed that core members of a organisation with such a great &#8220;<a href="https://ep2015.europython.eu/en/coc/">Code of Conduct</a>&#8221; do not live up for those values.</p>

<p>I&#8217;m not sure what to think, I am no one to judge them, but my disappointment and sadness cannot be put in words. What I do know is that I do not tolerate comments of that sort in my presence. I might not set the rules, but I have principles, and I say &#8220;<strong>ENOUGH!!</strong>&#8220;.</p>

<p>I was not there, but from the moment I listened to the podcast I have been trying to right their wrongs. Not because of them, right now, I cannot care less about EuroPython. My thoughts are with how the groups they make fun of would feel.</p>

<p>The EuroPython organisation has made some very offensive comments. I&#8217;m failing to understand why, and what was the objective of it. I&#8217;m failing to understand why nobody in that podcast saw how wrong it was.</p>

<p>Moreover, I was expecting of some kind of official statement, but it seems that an apologising tweet from a personal account of a member of the organisation it&#8217;s enough to amend the damage, you know, they only offended the women, gay and the rest of the society with their short sighted comments&#8230; and I had enough.</p>

<p>EuroPython, you have a Code of Conduct. Lead by example, you have the moral obligation of caring for the Python Community!</p>

<p>During the last PyConEs I was given a PyLadies t-shirt that I usually wear in any public event I participate. Let me tell you this: nobody EVER makes any comment about the t-shirt I wear unless it&#8217;s the PyLadies, and in general it&#8217;s a sexist comment.</p>

<p>I did think once about writing about the stupidity of this community I&#8217;m part of when I wear a t-shirt of a group that, read by yourself how do they describe themselves:</p>

<p>&#8220;<em>We are an international mentorship group with a focus on helping more women become active participants and leaders in the Python open-source community. <strong>Our mission is to promote, educate and advance a diverse Python community</strong> through outreach, education, conferences, events and social gatherings.</em>&#8221;</p>

<p>Now you know why when I speak in public I proudly wear their t-shirt. A group with such a challenging mission cannot have less that all my support.</p>

<p>My dear Spanish <a href="https://twitter.com/PyLadies_ES">PyLadies</a> tweeted this after learning about the podcast:</p>

<blockquote class="twitter-tweet" lang="en">
  <p>
    Mucho trabajo por hacer.
  </p>

  <p>
    — PyLadies_ES (@PyLadies_ES) <a href="https://twitter.com/PyLadies_ES/status/583603954984079361">April 2, 2015</a>
  </p>
</blockquote>

<p>(<strong><em>&#8220;So much work left to do&#8230;&#8221;</em></strong>)</p>

<p>Thank you, ladies, the world  would be a much better place if there were more people like you and less like them.</p>

<p class="text-right"><a class="btn btn-default" href="/2015/04/03/everyday-sexism-the-python-way/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/04/01/docker-in-the-enterprise/.html">Docker in the Enterprise</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-04-01</span>



<a class="label label-success" href="/category/DevOps.html">DevOps</a>




<a class="label label-info" href="/tag/DevOps.html">DevOps</a>

<a class="label label-info" href="/tag/Docker.html">Docker</a>

<a class="label label-info" href="/tag/devops.html">devops</a>

<a class="label label-info" href="/tag/docker.html">docker</a>

<a class="label label-info" href="/tag/mesos.html">mesos</a>


</p>

<p>My answer has been the same since the very beginning: <strong>Absolutely!</strong></p>

<p>It doesn&#8217;t mean it will happen soon, but it will happen. There&#8217;s just a few layers of middle management and hundreds of scared sysadmins in between, but it will happen.</p>

<p>I&#8217;ve migrated a few legacy enterprise applications to Docker and to me, there&#8217;s a big difference between startups using Docker and classic enterprise companies using Docker. To begin with, big enterprise companies are project and program based instead of product based. Middle management, red tape and a very low speed in general. In the technical aspects there are big differences also. Let me give you a couple of examples:</p>

<ul>
<li>Firewalls.</li>
<li>Legacy applications.</li>
</ul>

<p>Have you heard about Mesos? Docker Swarm? the ability to move containers around? well, let me tell you something, in the enterprise we have firewall rules. Firewall rules are dependant on the application but bound to the host. This means that you cannot move containers around if you cannot update firewall rules at the same time.</p>

<p>Solutions like Weave are perfect for this problem. Right now, I&#8217;m not sure how Docker is going to solve the networking aspect, so, I will not say that Docker will do it natively. Still, you get the point.</p>

<p>Another scary issue is &#8220;Legacy Applications&#8221;. Let&#8217;s face it, technical debt is bad, forgotten technical debt is pure evil. Moving these kind of applications into containers is sometimes harder than rewriting them from scratch. Issues that I&#8217;ve found while migrating legacy applications to containers can be split in two main groups:</p>

<ul>
<li>Configuration issues like

<ul>
<li>hard coded url and/or domains: quite typical to see hardcoded jdbc connections. You can get around it using internal DNSs or if in case of major trouble, a reverse proxy.</li>
<li>Hard coded IPs: If you&#8217;re lucky, again, Weave can give you a bit of air here.</li>
<li>Embedded credentials: hardcoding credentials is bad, but including these credentials inside of your binaries is terrible. Bad news is that it happens more often than you think. Yes, they used properties files, and yes, they put that file inside a jar, inside a war, inside an EAR&#8230; Hey, enterprise all the way down!</li>
</ul></li>
<li>Context Issues:

<ul>
<li>The system needs to run in a specific host with a specific configuration like specific IPs (ugh), specific URLs (easy), specific OS (this one was very painful)</li>
</ul></li>
</ul>

<p>Good news is that you have the tools to work around all these issues, and yes, you get much better on fixing them (with time, experience and tears). I don&#8217;t think that we will be seeing a &#8220;Wizard&#8221; to migrate your apps to Docker just yet but we will get there.</p>

<p class="text-right"><a class="btn btn-default" href="/2015/04/01/docker-in-the-enterprise/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/03/24/2nd-docker-birthday-the-london-way/.html">2nd Docker Birthday, the London Way</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-03-24</span>



<a class="label label-success" href="/category/Docker.html">Docker</a>



</p>

<p>As usual with Docker, the swag was top notch. The mentor&#8217;s t-shirt was especially awesomic!</p>

<p>Beers and pizza drove to a quick intro by <a href="https://twitter.com/bfirsh">Ben</a> from docker (<a href="https://twitter.com/bfirsh">@bfirsh</a>) who explained that that was not yet-another-meetup but what he called an &#8220;OpenSource-a-thon&#8221;. The idea is to get around the table together and contribute to the Docker project. He emphasized that not only code contributions were welcomed, but all sorts of non-code contributions too.</p>

<p>I teamed up with the fine people of <a href="http://www.cloud66.com/">Cloud66</a> trying to sort out the Documentation. We tried to complete <a href="https://github.com/docker/docker/issues/11593">the Issue 11593</a>, but we didn&#8217;t get too far. By the time we had set up the environment and started digging the code, it was time to wrap up.<img class=" size-medium wp-image-420 aligncenter" src="http://ivan.pedrazas.me/wp-content/uploads/2015/03/ben-docker-300x225.jpg" alt="ben-docker" width="300" height="225" /></p>

<p>Documentation is key to adoption. Unfortunately, code documentation is very hard unless you know the code very well. At this point I would encourage you, kind reader, to try to write a little about something that&#8217;s it&#8217;s itching you. There&#8217;s nothing like sitting down and starting to type (unless you have one of those funky standing desks, of course) to make you realise how hard is to write good documentation.<a href="http://ivan.pedrazas.me/wp-content/uploads/2015/03/stickers-docker.jpg"><img class="alignright size-medium wp-image-419" src="http://ivan.pedrazas.me/wp-content/uploads/2015/03/stickers-docker-300x225.jpg" alt="stickers-docker" width="300" height="225" /></a></p>

<p>Kudos from me to all the people writing documentation. Me and my children are very very pleased with your work. Keep it up!</p>

<p>Docker has a <a href="http://docker.party/">Docker.party</a> website about the motivation behind the &#8220;<em>open-source-a-thon</em>&#8221; where they explain that they will donate $50 to the <a href="http://www.oceanicsociety.org/">Oceanic Society</a> for each contribution we submit during the birthday. You see? write some documentation, save a whale!</p>

<p>But wait, it&#8217;s not only during these events that your contributions can save a whale: from 23rd of March to 19th of April, all contributions made to the Docker Project will count toward Docker’s donation to the Oceanic Society <strong>\o/</strong></p>

<p>I might spend some time finishing off that issue and to lead as example, I&#8217;m also happy to write a tutorial. I&#8217;ve been running Docker in production for almost a year now, I&#8217;ve built microservices, used Weave, and migrated dinosaurs (aka Big Enterprise Legacy Applications) to containers. So, I might say it&#8217;s safe to think I know a bit about how to use containers in real life scenarios.</p>

<p><a href="https://docs.google.com/forms/d/1R7T-UDsOHsZ9uBYy9YopVEajjPbMrc1cP_nQinfbctc/viewform">Fill this form</a> or  <a href="https://twitter.com/ipedrazas">Just let me know in Twitter</a> what kind of tutorial would you like to see and I will get my hands into it!</p>

<p><strong>Happy Birthday, Docker!</strong></p>

<p class="text-right"><a class="btn btn-default" href="/2015/03/24/2nd-docker-birthday-the-london-way/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/03/12/using-cassandra-in-aws-for-dev-test/.html">&#39;Using Cassandra in AWS for Dev &amp; Test&#39;</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-03-12</span>



<a class="label label-success" href="/category/DevOps.html">DevOps</a>




<a class="label label-info" href="/tag/Cassandra.html">Cassandra</a>

<a class="label label-info" href="/tag/DevOps.html">DevOps</a>


</p>

<p>As I&#8217;ve mentioned before, we create ephemeral clusters for our computational work force using Apache Spark, which helped us a lot to reduce the cost of our running infrastructure.</p>

<p>Yes, I&#8217;m a big fan of using infrastructure in an effective way. There&#8217;s no secret here, using the cloud gives you the flexibility to pay for what you use.</p>

<p>Our Dev &amp; Test machines only run during working hours (you know, to pay for what you use only). However, with Cassandra we had to do an exception. Noticed the past tense? We use the ephemeral drives of our AWS instances (in raid0), and as many of you have know, disks do not survive if you stop the instances&#8230; which makes stopping &amp; starting Cassandra nodes a pain.</p>

<p>The solution is pretty obvious, and yes, I&#8217;m banging my head against the wall for all the times I&#8217;ve wrongly said &#8220;Cassandra clusters cannot be stopped&#8221;.</p>

<p>We have a jenkins job that stop Dev &amp; Test machines. The idea was to be able to put my Cassandra cluster nodes in that job as well (to keep things tidy). However, it&#8217;s possible but not ideal because you create some dependencies (and there&#8217;s nothing better than being independent)</p>

<p>This is what my job does:</p>

<p style="padding-left: 30px;">
  <strong>Cassandra Stop Job</strong>
</p>

<ol>
<li>Flush cassandra data.

<ol>
<li>nodetool flush</li>
</ol></li>
<li>Stop cassandra service.</li>
<li>Copy Data out. (you have two options)

<ol>
<li>nodetool snapshot + tar + upload to S3</li>
<li>tar /data/cassandra + upload S3</li>
</ol></li>
<li>Stop the instance.</li>
</ol>

<p style="padding-left: 30px;">
  <strong>Cassandra Start Job</strong>
</p>

<ol>
<li>Start the instance.</li>
<li>Create raid0.</li>
<li>Copy data in.</li>
<li>Start cassandra service.</li>
</ol>

<p>That&#8217;s it, now my Cassandra clusters for Dev &amp; Test only run for 50h a week, instead of 168h (24&#215;7).</p>

<p>If you use the m3.2xlarge instance type, you will pay per node $28 per week instead of $94.08. A saving of <strong>$66.08</strong> per node per week.</p>

<p class="text-right"><a class="btn btn-default" href="/2015/03/12/using-cassandra-in-aws-for-dev-test/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>

<article>
<h1><a href="/2015/03/06/buckets-of-water/.html">Buckets of Water</a></h1>

<p>

<span class="label label-default">by ipedrazas</span>



<span class="label label-default">2015-03-06</span>



<a class="label label-success" href="/category/Cassandra.html">Cassandra</a>




<a class="label label-info" href="/tag/Cassandra.html">Cassandra</a>

<a class="label label-info" href="/tag/DevOps.html">DevOps</a>


</p>

<p>Communication is a two way road. It&#8217;s not just you sending a message, it&#8217;s the other part receiving it and understanding it. We&#8217;re good at sending and receiving, it&#8217;s in the understanding bit that we all struggle more than we would like to.</p>

<p>Finding good similes and analogies is hard. It&#8217;s something that sales people excel to, but it seems that technical people, we struggle a bit more.</p>

<p>Anyway, I had a little problem with one of our Cassandra clusters: it was overflowing data and nodes refused to join the ring&#8230; Solution? Scale up!</p>

<p>The process was simple but when the non-technical people started asking what was going on I had to find a way of illustrating the situation&#8230; and I did, using buckets of water. This is what I said:</p>

<p>&#8220;Imagine we have buckets of water and we pour water on them in a regular basis. When we see that the water levels are getting to high we add more buckets and little by little move water around until all the buckets have enough space to get more water&#8221;</p>

<p>This is what it usually happens when you add more Cassandra nodes to a ring.</p>

<p>&#8220;Well, trouble is that we&#8217;re not sure why, we cannot add more buckets. What would you do if you cannot add more buckets?&#8221; I asked.</p>

<p>&#8220;Can we use bigger buckets?&#8221;</p>

<p>&#8220;That&#8217;s pretty much what I have done! do you want to work with us?&#8221; Laughs and nods.</p>

<p>&#8220;I had to replace every single bucket by a bigger one. But there&#8217;s a catch, the bucket has to be the same, which is fine, because I can expand the bucket&#8230; because they are elastic&#8221;.</p>

<p>Here the guy asked a few questions about elasticity regarding to how AWS works and blimey, he understood that too!</p>

<p>&#8220;So, what we do is to bring a bucket where we pour all the water, expand our empty bucket and put the water back, and we have to do that for every single bucket&#8221;.</p>

<p>Upgrading all the nodes with Chef is pretty simple, so, it was a matter of just moving data (or water) around and launching a few commands (to re-create the raid0).</p>

<p>Today I&#8217;ve heard a conversation between two sales guy about buckets of water and then, then it&#8217;s when I realised how important is to send our message across as clear as water (pun intended).</p>

<p class="text-right"><a class="btn btn-default" href="/2015/03/06/buckets-of-water/.html#disqus_thread">Leave a comment!</a></p>
</article>
<hr>





<div class="text-center"><ul class="pagination">

    <li class="
    
    disabled
    
    ">
    <a href="#">&laquo;</a>
    </li>

    
    <li class="active">
    <a href="/index.html">
      1
    </a>
    </li>
    
    <li >
    <a href="/index2.html">
      2
    </a>
    </li>
    
    <li >
    <a href="/index3.html">
      3
    </a>
    </li>
    
    <li >
    <a href="/index4.html">
      4
    </a>
    </li>
    
    <li >
    <a href="/index5.html">
      5
    </a>
    </li>
    
    <li >
    <a href="/index6.html">
      6
    </a>
    </li>
     

    <li class="
    
    ">
    <a href="/index2.html">&raquo;</a>
    </li>

</ul></div>
 

    </div>
    
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="//getbootstrap.com/dist/js/bootstrap.min.js"></script>

    
  

  </body>
</html>
